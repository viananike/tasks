{% extends "base.html" %}

{% block title %}Task Hours Aggregation{% endblock %}

{% block content %}
<h1 style="text-align: center; color: #BB86FC;">Task Aggregation View</h1>

<div class="tables-wrapper" style="display: flex; flex-wrap: wrap; gap: 30px; justify-content: center; margin-top: 30px;">
    
    <!-- Left Table: Current Month Task List -->
    <div class="table-container" style="flex: 1 1 450px; max-width: 100%; overflow-x: auto;">
        <h2 style="text-align: center; color: #BB86FC;">Tasks for This Month</h2>
        <table style="width: 100%; min-width: 600px; border-collapse: collapse; background-color: #2a2a2a; border-radius: 10px; overflow: hidden; box-shadow: 0 2px 6px rgba(0,0,0,0.3);">
            <thead>
                <tr style="background-color: #3b3b3b;">
                    <th style="padding: 10px; color: #BB86FC;">Task</th>
                    <th style="padding: 10px; color: #BB86FC;">Comments</th>
                    <th style="padding: 10px; color: #BB86FC;">Date</th>
                    <th style="padding: 10px; color: #BB86FC;">Project</th>
                    <th style="padding: 10px; color: #BB86FC;">Time (min)</th>
                </tr>
            </thead>
            <tbody>
                {% for task in task_details %}
                    <tr style="border-bottom: 1px solid #444;">
                        <td style="padding: 10px;">{{ task[0] }}</td>
                        <td style="padding: 10px;">{{ task[1] }}</td>
                        <td style="padding: 10px;">{{ task[2] }}</td>
                        <td style="padding: 10px;">{{ task[3] }}</td>
                        <td style="padding: 10px;">{{ task[4] }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Right Table: Monthly Aggregates -->
    <div class="table-container" style="flex: 1 1 300px; max-width: 100%; overflow-x: auto;">
        <h2 style="text-align: center; color: #BB86FC;">Monthly Totals</h2>
        <table style="width: 100%; min-width: 300px; border-collapse: collapse; background-color: #2a2a2a; border-radius: 10px; overflow: hidden; box-shadow: 0 2px 6px rgba(0,0,0,0.3);">
            <thead>
                <tr style="background-color: #3b3b3b;">
                    <th style="padding: 10px; color: #BB86FC;">Month</th>
                    <th style="padding: 10px; color: #BB86FC;">Total Time (min)</th>
                </tr>
            </thead>
            <tbody>
                {% for row in monthly_totals %}
                    <tr style="border-bottom: 1px solid #444;">
                        <td style="padding: 10px;">{{ row[0]|format_month }}</td>
                        <td style="padding: 10px;">{{ row[1] }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<div style="text-align: center; margin-top: 40px;">
    <a href="/" class="link-button" style="background-color: #BB86FC; color: #121212; padding: 10px 20px; border-radius: 8px; text-decoration: none; font-weight: bold;">Back to Home</a>
</div>
{% endblock %}
